## 참조
HTTP-%EC%9B%B9-%EA%B8%B0%EB%B3%B8-%EC%A7%80%EC%8B%9D-1-%EC%9D%B8%ED%84%B0%EB%84%B7-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC

## 1. 프로토콜
---

<br><br>

### **1.1. 인터넷 프로토콜(Internet Protocol)**

- 인터넷 프로토콜은 네트워크 계층으로 7계층중 OSI 3계층에 해당합니다.

- IP 주소는 네트워크 상에서 각 장치를 구분하는 논리적인 주소입니다.

- IP란 데이터 전송의 기본적인 규칙과 표준을 정의한 통신 규약이기도 합니다.

- IP는 패킷을 목적지로 전송하는 과정과 그에 따른 주소 체계, 라우팅 방법 등을 정의한 규약입니다. 


#### 1.1.1. 인터넷 프로토콜(IP)의 한계:

**데이터 재조립의 복잡성:**

IP는 클라이언트나 서버가 데이터를 전송할때, 패킷이라는 단위로 데이터를 쪼개어 인터넷망의 여러 노드를 통해 전송하게 됩니다. 
이때 각 패킷은 순차적으로 목적지에 도착하지 않기 때문에 목적지에 다다른 각 패킷들의 순서가 바뀌거나 손실이 이러날 수 있습니다.
따라서 수신 측에서 패킷을 재조합하는 과정이 필요합니다.


**신뢰성 부족:**

IP는 비연결성을 기반으로 작동합니다.
즉, 패킷을 목적지로 보내지만, 패킷이 도착했는지 확인할 방법이 없습니다.
IP는 순서 보장이나 재전송을 관리하지 않기 때문에, 패킷이 도착하지 않으면 그 상태를 스스로 복구하거나 재전송하지 않습니다.
따라서 패킷 손실에 대한 처리는 상위 계층(예: TCP)에서 담당해야 합니다.
밑에서 TCP에 대해 다루겠습니다.


### **1.2. TCP*
- TCP/UDP는 전송 계층인 OSI 4계층에 해당합니다.

**인터넷 프로토콜(IP)의 보완 TCP**
- TCP는 IP의 한계인 순서 보장이나 패킷 손실에 대해 보완을 해줍니다. 
- TCP는 전송 계층에서 데이터 전송의 신뢰성을 보장
- TCP는 포트 번호를 통해 어느 애플리케이션으로 데이터를 전달할지 결정.

TCP는 IP 패킷 내부에 TCP 세그먼트를 생성해 출발 PORT, 목적지 PORT, 전송제어, 순서, 검증 정보를 담아 수신자에게 전달한다.

### **1.2.2 TCP 포트**
데이터 전송 과정에서 IP와 포트 포함 클라이언트가 서버에 패킷을 보낼 때, 패킷에는 다음 정보들이 포함:

출발지 IP 주소: 클라이언트의 IP
목적지 IP 주소: 서버의 IP
출발지 포트 번호: 클라이언트에서 사용하는 임의의 포트
목적지 포트 번호: 서버에서 해당 애플리케이션이 사용하는 포트
이 정보들을 포함한 패킷이 전송되면, 서버는 해당 포트 번호를 확인해 어떤 애플리케이션으로 데이터가 가야 하는지를 결정합니다.

결론:
IP는 데이터를 어느 장치로 보낼지를 결정하고, 포트 번호는 해당 장치에서 실행 중인 애플리케이션을 구분합니다.
TCP와 UDP는 각각 포트 번호를 사용하여 통신하며, TCP는 신뢰성 있는 전송, UDP는 빠른 전송을 위한 용도로 사용됩니다.
포트 번호를 통해 같은 IP 내에서 여러 프로세스(애플리케이션)를 구분할 수 있습니다.



## **1.3. OSI 7계층 프로토콜:**
HTTP (HyperText Transfer Protocol):
- 응용(application 계층)OSI 7계층에 속합니다.
- 웹에서 데이터를 주고받기 위한 비보안 프로토콜.
- 기본 포트 번호는 80번이지만, HTTP 자체는 포트 번호가 아니라 통신 방식을 가리킵니다.

예시: http://www.example.com은 HTTP 프로토콜을 통해 서버에 접근하겠다는 의미입니다.


HTTPS (HyperText Transfer Protocol Secure):
- **HTTP에 보안(SSL/TLS)** 을 추가한 프로토콜
- 기본 포트 번호는 443번이지만, HTTPS 역시 포트 번호가 아닌 통신 방식을 가리킵니다.

예시: https://www.example.com은 HTTPS 프로토콜을 통해 암호화된 방식으로 서버에 접근하겠다는 의미입니다.

### 1.3.2. 프로토콜과 포트 번호의 관계:
- 프로토콜은 데이터를 어떻게 전송할지를 결정하는 규칙(HTTP, HTTPS 등)을 정의합니다.
- 포트 번호는 서버나 클라이언트 특정 애플리케이션에 연결하기 위한 경로를 나타냅니다.
- HTTP의 기본 포트는 80번이지만, 이 포트 번호는 다른 것으로 변경할 수 있습니다.
- HTTPS의 기본 포트는 443번입니다.

**예를 들어:**

http://localhost:8080:
여기서는 HTTP 프로토콜을 사용하지만, 포트 번호는 8080으로 명시되어 있습니다. 기본 포트 80이 아닌 8080번 포트로 HTTP 통신을 하겠다는 의미입니다.

https://example.com:8443:
HTTPS 프로토콜을 사용하고 있으며, 포트 번호는 8443번입니다. 기본 포트 443번이 아닌 8443번 포트에서 암호화된 HTTPS 통신을 하겠다는 의미입니다.

**결론:**
HTTP와 HTTPS는 통신 규칙을 정의하는 프로토콜이며, 포트 번호가 아닙니다.
포트 번호는 프로토콜과 별도로 서버의 특정 애플리케이션에 연결할 때 사용됩니다.
HTTP는 기본적으로 80번 포트, HTTPS는 443번 포트를 사용하지만, 포트 번호는 다


### 1.3.3 HTTP & TCP / IP 관계

- HTTP는 TCP/IP 위에서 동작합니다. 즉, HTTP는 데이터를 전송할 때 TCP와 IP를 사용하여 통신합니다.
- HTTP는 클라이언트(예: 웹 브라우저)와 서버(예: 웹 서버) 간의 데이터 전송 규칙을 정의하는 응용 계층 프로토콜입니다.
- IP는 데이터가 네트워크 상에서 어디로 가야 하는지를 결정하고, TCP는 데이터의 신뢰성을 보장하는 전송 계층 프로토콜입니다.


--OSI 7계층


OSI 7계층(Open Systems Interconnection) 모델은 네트워크 통신을 이루는 각 계층별 역할을 나누어 설명하는 참조 모델입니다. 이 모델은 계층별로 구분된 역할을 정의하여, 각 계층이 서로 독립적이면서 상호 작용하는 방식으로 동작하도록 설계되었습니다. 이로 인해, 네트워크 통신은 모든 계층이 함께 협력하여 데이터를 주고받을 수 있습니다.

OSI 7계층의 각 계층 역할
1계층 – 물리 계층 (Physical Layer):

전기적, 기계적 데이터 전송 방식(예: 케이블, 무선)을 담당합니다.
하드웨어와 물리적 연결을 처리하는 계층입니다.
2계층 – 데이터 링크 계층 (Data Link Layer):

물리적 링크 위에서 데이터 전송을 담당하고, 프레임 단위로 데이터를 전달합니다.
MAC 주소 등을 사용해 같은 네트워크 내에서 장치 간의 데이터 전달을 처리합니다.
3계층 – 네트워크 계층 (Network Layer):

패킷을 목적지까지 전송하는 역할을 담당합니다.
IP 주소를 사용해 데이터를 라우팅하고, 여러 네트워크를 거쳐 데이터가 전달될 수 있도록 합니다. 대표적인 프로토콜로 IP가 있습니다.
4계층 – 전송 계층 (Transport Layer):

데이터의 신뢰성 있는 전송을 보장하고, 세그먼트 단위로 데이터를 관리합니다.
TCP와 UDP가 전송 계층에서 동작하며, 패킷 분할, 순서 보장, 오류 검출 등을 담당합니다.
5계층 – 세션 계층 (Session Layer):

통신하는 장치 간의 세션 관리를 담당합니다.
세션 설정, 유지, 종료 같은 작업을 처리하여 데이터가 오랜 시간 동안 안정적으로 교환되도록 합니다.
6계층 – 표현 계층 (Presentation Layer):

데이터의 형식 변환을 담당합니다.
데이터를 암호화, 압축, 변환하여 상위 계층이 이해할 수 있도록 처리합니다.
7계층 – 응용 계층 (Application Layer):

사용자와 가장 가까운 계층으로, 사용자가 직접 사용하는 애플리케이션과 상호작용하는 계층입니다.
HTTP, HTTPS, FTP, SMTP 같은 프로토콜이 이 계층에서 동작합니다.
계층 간 상호작용
데이터 흐름:

네트워크 통신을 할 때, 각 계층은 상위 계층의 데이터를 받아 하위 계층으로 넘기는 방식으로 상호작용합니다.
예를 들어, **7계층(HTTP)**에서 웹 요청이 시작되면, 이 데이터는 6계층을 거쳐 5계층, 4계층에서 TCP 또는 UDP로 관리되며, 최종적으로 3계층(IP), 2계층, 1계층을 거쳐 물리적으로 전송됩니다.
독립성:

각 계층은 자신의 역할만을 수행하고, 독립적으로 동작합니다.
상위 계층이 어떤 프로토콜을 사용하든, 하위 계층은 그 데이터를 처리할 수 있습니다. 예를 들어, HTTP나 FTP 같은 프로토콜이 7계층에서 동작하더라도, **4계층(TCP/UDP)**은 이를 구분하지 않고 신뢰성 있는 전송만을 보장합니다.
계층 간 의존성:

상위 계층이 하위 계층에 의존하지만, 각 계층은 자신만의 고유한 기능을 수행합니다. 예를 들어, **3계층(IP)**에서 패킷을 라우팅하지만, 그 내부에 있는 데이터가 HTTP 요청인지 FTP 요청인지 신경 쓰지 않습니다. 이는 **7계층(응용 계층)**의 역할입니다.
프로토콜 선택:

각 계층은 서로 다른 프로토콜을 사용할 수 있지만, 상위 계층은 하위 계층의 프로토콜에 영향을 받지 않습니다.
예를 들어, HTTP(7계층)를 사용할 때 TCP(4계층)를 사용하며, IP(3계층)를 통해 데이터가 전송됩니다. HTTP와 HTTPS는 동시에 사용할 수 없지만, 각기 다른 세션에서는 선택적으로 사용 가능합니다.
마찬가지로 TCP와 UDP도 상황에 따라 하나만 사용되며, 둘을 동시에 선택할 수는 없습니다.
요약:
7계층은 각기 다른 역할을 수행하며, 데이터를 전송할 때 모든 계층이 협력하여 동작합니다.
HTTP와 HTTPS는 7계층의 프로토콜로, 하나를 선택해 사용하며 TCP/IP는 4계층과 3계층에서 처리됩니다.
각 계층은 독립적으로 동작하지만, 서로 상호작용하며 데이터를 주고받습니다.